#!/bin/sh

TMUX="tmux -2"

runon()
{
    session_name=Workspace
    window=${session}:$1
    # pane=${window}.0
    ${TMUX} send-keys -t "$window" "$2" Enter
}

${TMUX} new-session -d -s "Workspace" -n "Minicom"

${TMUX} new-window -n "Recovery" -t "Workspace"
${TMUX} new-window -n "zFAS"     -t "Workspace"
${TMUX} new-window -n "rel-23"   -t "Workspace"
${TMUX} new-window -n "Env"      -t "Workspace"
${TMUX} new-window -n "Debug"    -t "Workspace"

${TMUX} select-window -t "Workspace:zFAS"

runon zFAS "cd ~/workspace/dev-kernel/embedded-linux.xml/zFAS"
runon zFAS ". tmake/scripts/envsetup.sh"
runon zFAS "choose embedded-linux p2360 none debug internal armv7"

runon zFAS "cd ~/workspace/branches/k310-embedded.xml/embedded/zFAS-23.10.04"
runon zFAS ". tmake/scripts/envsetup.sh"
runon zFAS "choose embedded-linux p2360 none release internal armv7"

${TMUX} a
